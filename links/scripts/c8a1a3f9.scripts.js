"use strict";angular.module("linksApp",["ngCookies","ngResource","ngSanitize","ngRoute","underscore"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",reloadOnSearch:!1}).when("/add",{templateUrl:"views/add.html",controller:"AddCtrl"}).otherwise({redirectTo:"/"})}]);var munge=function(a){return a=a.split("\n"),a=a.map(function(a){var b=a.split("|");return{url:b[0],title:b[1]||b[0]}})},app=angular.module("linksApp");app.service("Links",["$http","$q",function(a,b){var c=b.defer();this.links=c.promise,a.get("links.txt").success(function(a,b){b>=200&&300>b?c.resolve(munge(a)):c.reject("Error "+b)})}]);var app=angular.module("linksApp");app.factory("CryptoJS",function(){return window.CryptoJS});var app=angular.module("linksApp");app.filter("decode",["_","CryptoJS",function(a,b){var c=a.memoize(function(a,c){if(0===a.url.indexOf("http"))return a;var d=a.url,e=a.title;if(c&&0!==d.indexOf("http"))try{d=b.AES.decrypt(d,c),d=d.toString(b.enc.Utf8),e=b.AES.decrypt(e,c),e=e.toString(b.enc.Utf8)}catch(f){d="",e=""}return 0===d.indexOf("http")?{url:d,title:e}:null},function(a,b){return a.url+b});return function(b,d){var e=[];return a.each(b,function(a){a=c(a,d),a&&e.push(a)}),e}}]),app.filter("encode",["_","CryptoJS",function(a,b){return a.memoize(function(a,c){return console.log(a),c&&a&&(a=b.AES.encrypt(a,c),console.log(a),a=a.toString()),console.log(a),a},function(a,b){return a+b})}]),angular.module("linksApp").controller("MainCtrl",["$scope","$location","Links",function(a,b,c){a.key=b.hash(),c.links.then(function(b){a.links=b}),a.change=function(){b.hash(a.key).replace()},angular.element("#key").focus()}]),angular.module("linksApp").controller("AddCtrl",["$scope",function(a){a.key="",a.url="",a.title=""}]);